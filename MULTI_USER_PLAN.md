# üë• –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç–∏ (Multi-User)

## üî¥ –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

**–°–µ–π—á–∞—Å:** –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å, –æ—Ç–∫—Ä—ã–≤ `/app`, –≤–∏–¥–∏—Ç –í–°–ï –ø–µ–Ω—Ç–µ—Å—Ç—ã, —Å–µ—Ä–≤–∏—Å—ã –∏ –æ—Ç—á–µ—Ç—ã –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

**–ù—É–∂–Ω–æ:** –ö–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ.

---

## üìã –¢–µ–∫—É—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

### –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
```
backend/
  pentests-data/          # –í—Å–µ –ø–µ–Ω—Ç–µ—Å—Ç—ã –≤ –æ–¥–Ω–æ–π –ø–∞–ø–∫–µ
    - {id}.json          # –ë–µ–∑ userId
  data/
    - services.json      # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã (–±–µ–∑ userId)
  reports/               # –í—Å–µ –æ—Ç—á–µ—Ç—ã (–±–µ–∑ userId)
```

### API:
- `GET /api/pentests` ‚Üí –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –í–°–ï –ø–µ–Ω—Ç–µ—Å—Ç—ã
- `POST /api/pentests` ‚Üí —Å–æ–∑–¥–∞–µ—Ç –ø–µ–Ω—Ç–µ—Å—Ç –ë–ï–ó userId
- –ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å —Å JWT

### 1. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Å userId:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ –ø–∞–ø–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é)
```
backend/
  users-data/
    {userId}/
      pentests/
        - {id}.json
      services.json
      reports/
        - {id}.pdf
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –õ–µ–≥–∫–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ –ò–∑–æ–ª—è—Ü–∏—è –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- ‚úÖ –ü—Ä–æ—â–µ –±—ç–∫–∞–ø—ã –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –õ–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ë–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤/–ø–∞–ø–æ–∫

#### –í–∞—Ä–∏–∞–Ω—Ç B: userId –≤ —Ñ–∞–π–ª–∞—Ö
```
backend/
  pentests-data/
    - {id}.json  # —Å –ø–æ–ª–µ–º userId
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –ú–µ–Ω—å—à–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥–µ
- ‚úÖ –í—Å–µ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –°–ª–æ–∂–Ω–µ–µ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚ùå –ù—É–∂–Ω–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è: –í–∞—Ä–∏–∞–Ω—Ç A (–ø–æ –ø–∞–ø–∫–∞–º)**

---

### 2. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ç–∏–ø–∞—Ö:**

```typescript
// backend/src/types/pentest.ts
export interface Pentest {
  id: string;
  userId: string;        // ‚Üê –î–û–ë–ê–í–ò–¢–¨
  name: string;
  targetUrl: string;
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–µ
}
```

---

### 3. **JWT —Ç–æ–∫–µ–Ω —Å userId:**

```typescript
// –ü—Ä–∏ –ª–æ–≥–∏–Ω–µ —Å–æ–∑–¥–∞–µ–º —Ç–æ–∫–µ–Ω:
const token = jwt.sign(
  { 
    userId: user.id,
    username: user.username 
  },
  JWT_SECRET,
  { expiresIn: '1h' }  // –ö–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è –∂–∏–∑–Ω–∏
);

// Refresh token –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è —Å–µ—Å—Å–∏–∏:
const refreshToken = jwt.sign(
  { userId: user.id, type: 'refresh' },
  JWT_SECRET,
  { expiresIn: '6h' }  // 6 —á–∞—Å–æ–≤ –ø–æ—Å–ª–µ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è
);
```

---

### 4. **Sliding Session (6 —á–∞—Å–æ–≤ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è):**

**–ú–µ—Ö–∞–Ω–∏–∑–º:**
- JWT —Ç–æ–∫–µ–Ω –∂–∏–≤–µ—Ç 1 —á–∞—Å
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º refresh token
- –ï—Å–ª–∏ refresh token –≤–∞–ª–∏–¥–µ–Ω ‚Üí –≤—ã–¥–∞–µ–º –Ω–æ–≤—ã–π JWT —Ç–æ–∫–µ–Ω
- –ï—Å–ª–∏ refresh token –∏—Å—Ç–µ–∫ (6 —á–∞—Å–æ–≤ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è) ‚Üí —Ç—Ä–µ–±—É–µ–º –Ω–æ–≤—ã–π –ª–æ–≥–∏–Ω

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è:**
```typescript
// Middleware –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
app.use('/api', async (req, res, next) => {
  const token = req.headers.authorization?.split(' ')[1];
  const refreshToken = req.cookies?.refreshToken;
  
  if (token && isValid(token)) {
    // –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω, –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ
    const decoded = jwt.decode(token);
    const newToken = generateToken(decoded.userId);
    res.setHeader('X-New-Token', newToken);
  } else if (refreshToken && isValid(refreshToken)) {
    // –¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫, –Ω–æ refresh token –≤–∞–ª–∏–¥–µ–Ω
    const decoded = jwt.decode(refreshToken);
    const newToken = generateToken(decoded.userId);
    res.setHeader('X-New-Token', newToken);
  }
  
  next();
});
```

---

### 5. **–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ API:**

#### Backend Middleware:
```typescript
// backend/src/middleware/auth.middleware.ts
export const authMiddleware = (req: Request, res: Response, next: NextFunction) => {
  const token = req.headers.authorization?.split(' ')[1];
  
  if (!token) {
    return res.status(401).json({ error: '–¢–æ–∫–µ–Ω –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω' });
  }
  
  try {
    const decoded = jwt.verify(token, JWT_SECRET) as { userId: string };
    req.userId = decoded.userId;  // –î–æ–±–∞–≤–ª—è–µ–º userId –≤ request
    next();
  } catch (error) {
    return res.status(401).json({ error: '–ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω' });
  }
};
```

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:
```typescript
// backend/src/routes/pentest.routes.ts
router.get('/', authMiddleware, (req, res) => {
  const userId = req.userId;  // –ò–∑ middleware
  const pentests = pentestService.getUserPentests(userId);  // ‚Üê –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
  res.json(pentests);
});

router.post('/', authMiddleware, (req, res) => {
  const userId = req.userId;
  const pentest = pentestService.createPentest(userId, name, config);  // ‚Üê –° userId
  res.json(pentest);
});
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö:
```typescript
// backend/src/services/pentest.service.ts
class PentestService {
  private readonly DATA_DIR = join(process.cwd(), 'users-data');
  
  getUserPentests(userId: string): Pentest[] {
    const userDir = join(this.DATA_DIR, userId, 'pentests');
    // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç–æ–ª—å–∫–æ –ø–µ–Ω—Ç–µ—Å—Ç—ã —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  }
  
  createPentest(userId: string, name: string, config: PentestConfig): Pentest {
    const pentest: Pentest = {
      id: uuidv4(),
      userId,  // ‚Üê –î–æ–±–∞–≤–ª—è–µ–º userId
      // ...
    };
    
    const userDir = join(this.DATA_DIR, userId, 'pentests');
    this.savePentest(userId, pentest);
  }
}
```

---

### 6. **Frontend –∑–∞—â–∏—Ç–∞:**

```typescript
// frontend/src/components/ProtectedRoute.tsx
const ProtectedRoute = ({ children }: { children: React.ReactNode }) => {
  const { token, isAuthenticated } = useAuth();
  
  if (!isAuthenticated) {
    return <Navigate to="/login" />;
  }
  
  return <>{children}</>;
};

// frontend/src/App.tsx
<Route path="/app" element={
  <ProtectedRoute>
    <Layout />
  </ProtectedRoute>
}>
  {/* –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ —Ä–æ—É—Ç—ã */}
</Route>
```

---

### 7. **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö:**

**–ü—Ä–æ–±–ª–µ–º–∞:** –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ–Ω—Ç–µ—Å—Ç—ã –Ω–µ –∏–º–µ—é—Ç userId.

**–í–∞—Ä–∏–∞–Ω—Ç—ã:**
1. **–ü—Ä–∏—Å–≤–æ–∏—Ç—å –∞–¥–º–∏–Ω—É:** –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ–Ω—Ç–µ—Å—Ç—ã ‚Üí userId –ø–µ—Ä–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–£–¥–∞–ª–∏—Ç—å:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ (—á–∏—Å—Ç—ã–π —Å—Ç–∞—Ä—Ç)
3. **–ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç:** –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è —Ä—É—á–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –í–∞—Ä–∏–∞–Ω—Ç 1 (–ø—Ä–∏—Å–≤–æ–∏—Ç—å –ø–µ—Ä–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é) –∏–ª–∏ –í–∞—Ä–∏–∞–Ω—Ç 2 (—á–∏—Å—Ç—ã–π —Å—Ç–∞—Ä—Ç)

---

## üîß –°–ª–æ–∂–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

### 1. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** ‚ö†Ô∏è
- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ–Ω—Ç–µ—Å—Ç—ã –±–µ–∑ userId
- –ù—É–∂–Ω–æ —Ä–µ—à–∏—Ç—å, –∫–æ–º—É –æ–Ω–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç
- –ú–∏–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤

### 2. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö API endpoints** ‚ö†Ô∏è
- –í—Å–µ GET –∑–∞–ø—Ä–æ—Å—ã ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ userId
- –í—Å–µ POST –∑–∞–ø—Ä–æ—Å—ã ‚Üí –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ userId
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –¥–∞–Ω–Ω—ã–µ)

### 3. **–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è** ‚ö†Ô∏è
- –ü–µ—Ä–µ—Ö–æ–¥ –æ—Ç `pentests-data/` –∫ `users-data/{userId}/`
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏/—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (pentest, service, report)

### 4. **Sliding Session —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è** ‚ö†Ô∏è
- –ù—É–∂–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
- –•—Ä–∞–Ω–µ–Ω–∏–µ refresh tokens (–≤ –ë–î –∏–ª–∏ —Ñ–∞–π–ª–µ)
- –û—á–∏—Å—Ç–∫–∞ –∏—Å—Ç–µ–∫—à–∏—Ö refresh tokens

### 5. **Frontend –∏–∑–º–µ–Ω–µ–Ω–∏—è** ‚ö†Ô∏è
- Context –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ProtectedRoute –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–∞—Ö

---

## üìä –û—Ü–µ–Ω–∫–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏:

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°–ª–æ–∂–Ω–æ—Å—Ç—å | –í—Ä–µ–º—è |
|-----------|-----------|----------|
| JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | üü¢ –°—Ä–µ–¥–Ω—è—è | 2-3 —á–∞—Å–∞ |
| –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö | üü° –í—ã—Å–æ–∫–∞—è | 1-2 —á–∞—Å–∞ |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ API | üü° –í—ã—Å–æ–∫–∞—è | 3-4 —á–∞—Å–∞ |
| –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤ | üü° –í—ã—Å–æ–∫–∞—è | 2-3 —á–∞—Å–∞ |
| Frontend –∑–∞—â–∏—Ç–∞ | üü¢ –°—Ä–µ–¥–Ω—è—è | 1-2 —á–∞—Å–∞ |
| Sliding Session | üü† –°—Ä–µ–¥–Ω—è—è | 2-3 —á–∞—Å–∞ |
| **–ò–¢–û–ì–û** | **üü° –í—ã—Å–æ–∫–∞—è** | **11-17 —á–∞—Å–æ–≤** |

---

## üöÄ –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ (–ø–æ—à–∞–≥–æ–≤–æ):

### –≠—Ç–∞–ø 1: –ë–∞–∑–æ–≤–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
1. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (jsonwebtoken, bcrypt, @types)
2. ‚úÖ –°–æ–∑–¥–∞—Ç—å `/api/auth/login` endpoint
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å middleware –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞
4. ‚úÖ Frontend: LoginModal –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
5. ‚úÖ Frontend: Context –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

### –≠—Ç–∞–ø 2: –ó–∞—â–∏—Ç–∞ —Ä–æ—É—Ç–æ–≤
6. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç—å middleware –∫–æ –≤—Å–µ–º API —Ä–æ—É—Ç–∞–º
7. ‚úÖ Frontend: ProtectedRoute –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
8. ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –ª–æ–≥–∏–Ω –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞

### –≠—Ç–∞–ø 3: –ú—É–ª—å—Ç–∏—Ç–µ–Ω–∞–Ω—Ç–Ω–æ—Å—Ç—å
9. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å userId –≤ —Ç–∏–ø—ã (Pentest, Service, Report)
10. ‚úÖ –ò–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ö—Ä–∞–Ω–µ–Ω–∏—è (–ø–æ –ø–∞–ø–∫–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)
11. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ userId
12. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ API endpoints
13. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

### –≠—Ç–∞–ø 4: Sliding Session
14. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å refresh tokens
15. ‚úÖ Middleware –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤
16. ‚úÖ Frontend: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

---

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ù–∞—á–∞—Ç—å —Å –±–∞–∑–æ–≤–æ–π –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏** (–≠—Ç–∞–ø 1-2)
2. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –æ–¥–Ω–æ–º endpoint** (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/pentests`)
3. **–ó–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∫–æ –≤—Å–µ–º** (–≠—Ç–∞–ø 3)
4. **Sliding Session –¥–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ü–µ** (–≠—Ç–∞–ø 4)

2. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
   - –°–ø—Ä–æ—Å–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –∏–ª–∏ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –∞–¥–º–∏–Ω—É?
   - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - HTTPS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
   - Rate limiting –Ω–∞ `/api/auth/login`
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

---

## ‚ùì –í–æ–ø—Ä–æ—Å—ã –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è:

1. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:** –£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–µ–Ω—Ç–µ—Å—Ç—ã –∏–ª–∏ –ø—Ä–∏—Å–≤–æ–∏—Ç—å –ø–µ—Ä–≤–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é?
2. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ö—Ä–∞–Ω–µ–Ω–∏—è:** –ü–æ –ø–∞–ø–∫–∞–º (–í–∞—Ä–∏–∞–Ω—Ç A) –∏–ª–∏ userId –≤ —Ñ–∞–π–ª–∞—Ö (–í–∞—Ä–∏–∞–Ω—Ç B)?
3. **Refresh tokens:** –•—Ä–∞–Ω–∏—Ç—å –≤ —Ñ–∞–π–ª–µ –∏–ª–∏ –≤ –ø–∞–º—è—Ç–∏ (—Å –æ—á–∏—Å—Ç–∫–æ–π)?
4. **–í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–æ–≤:** 1 —á–∞—Å JWT + 6 —á–∞—Å–æ–≤ refresh - –ø–æ–¥—Ö–æ–¥–∏—Ç?

